# Go 环境变量


![Go env](https://raw.githubusercontent.com/majunmin/image/master/img20201111151911.png)
- GOROOT: Go 语言安装根目录的路径，也就是 GO 语言的安装路径。
- GOPATH: 若干工作区目录的路径。是我们自己定义的工作空间。
- GOBIN: GO 程序生成的可执行文件（executable file）的路径。


`GOPATH` 有什么含义？
1. GOPATH 可以理解为 GOlang的工作目录, 它的值是一个目录的路径，也可以是多个目录路径,每个目录都代表 Go 语言的一个`工作区(workspace)`.
2. 我们需要利于这些`工作区`，去放置` Go 语言的源码文件(source file)`,以及`安装(install)后的归档文件(archive file，也就是以".a"为扩展名的文件)`和`可执行文件(executable file)`.
3. In fact, 由于 Go 语言项目在其生命周期内的所有操作(编码、依赖管理、构建、测试、安装等)基本上都是围绕着 `GOPATH` 和`工作区`进行的.

### 1. Go 语言源码的组织方式是怎样的；

GoLang 源码的组织方式就是以环境变量 `GOPATH`、`工作区`、`src 目录`和`代码包`为主线的。
一般情况下，GoLang 的源码文件都需要被存放在环境变量 GOPATH 包含的某个工作区(目录)中的 src 目录下的某个代码包(目录)中。

### 2. 你是否了解源码安装后的结果(只有在安装后，Go 语言源码才能被我们或其他代码使用)

- 那么在安装后如果产生了`归档文件(以".a"为扩展名的文件)`,就会放进该工作区的 `pkg 子目录`.
- 如果产生了`可执行文件`,就可能会放进该工作区的` bin 子目录`.

![GOPATH与工作区](https://raw.githubusercontent.com/majunmin/image/master/imgGOPATH%E4%B8%8E%E5%B7%A5%E4%BD%9C%E5%8C%BA.png)



> 总之，你需要记住的是，某个工作区的 src 子目录下的源码文件在安装后一般会被放置到当前工作区的 pkg 子目录下对应的目录中，
> 或者被直接放置到该工作区的 bin 子目录中。


### 3. 你是否理解构建和安装 Go 程序的过程(这在开发程序以及查找程序问题的时候都很有用，否则你很可能会走弯路).

构建使用命令`go build`，安装使用命令`go install`。构建和安装代码包的时候都会执行编译、打包等操作，并且，这些操作生成的任何文件都会先被保存到某个临时的目录中.

1. go build
- 如果构建的是库源码文件，那么操作后产生的结果文件只会存在于临时目录中。这里的构建的主要意义在于检查和验证。
- 如果构建的是命令源码文件，那么操作的结果文件会被搬运到源码文件所在的目录中.

2. go install
`安装`操作会先执行`构建`,然后还会进行`链接`操作,并且*把结果文件搬运到指定目录*.

- 如果安装的是库源码文件,  那么结果文件会被搬运到它所在工作区的 pkg 目录下的某个子目录中。
- 如果安装的是命令源码文件,那么结果文件会被搬运到它所在工作区的 bin 目录中,或者环境变量`GOBIN`指向的目录中。


## golang 的依赖管理

* Go 语言在多个工作区中查找依赖包的时候是以怎样的顺序进行的？
* 如果在多个工作区中都存在导入路径相同的代码包会产生冲突吗？


### go get

go get 会从一些主流的公用代码仓库(github)中下载目标代码，并把他们安装到环境变量GPPATH的第一个工作区目录中，如果存在`GOBIN`，那么仅包含命令源码文件的代码会被安装到GOBIN指向的那个目录

-u: 下载并安装代码包，不论工作区中是否已存在它们。
-d: 只下载代码包，不安装代码包。
-fix: 在下载代码包后先运行一个用于根据当前 Go 语言版本修正代码的工具,然后再安装代码包.
-t: 同时下载测试所需的代码包。
-insecure: 允许通过非安全的网络协议下载和安装代码包. HTTP 就是这样的协议。




-------------------------
[01 | 工作区和GOPATH](https://time.geekbang.org/column/article/12959)


